{% extends 'app1/base.html' %}

{% block body %}


<style>
   @media print {
    /* Hide navigation and icons */
    .navbar {
        display: none !important;
    }
    .dropdown-item {
        display: none !important;
        white-space: nowrap !important;
    }
    /* Set all text color to black */
    body {
        color: black !important;
    
    }
    /* Hide "Overview" and "Transactions" text */
    .page-content a {
        display: none !important;
    }
    .nav-container{
        display: none !important;
    }
    .blinking-text{
        visibility: visible !important;
    }
    .card-body{
        color: black;
    }
    .btn{
        display: none !important;
    }
} 


</style>
{% for a in item %}
<div class="page-content">
    <div class="card radius-15 h-20">
        <div class="row">
            <div class="col-12 col-lg-12 col-xl-12">
                <div class="card" style="background-color:transparent;">
                    <div class="row no-gutters">
                        <div class="col-md-2"></div>
            <div class="col  mt-2" style="margin-left:90% ;justify-content: end;" >
              <button class="btn btn-outline-info" id="print-button"style="height:39px ;width:70px; border-color: rgb(21, 148, 191); color: white;border-radius: 15px; ">Print</button> 
            </div>
            </div></div></div></div>
            <div class="col-md-12">
                <center><h2 class="mt-3" style="text-transform:Uppercase;">{{ a.name }} TRANSACTIONS</h2></center>
                <center><br>
                    <hr style="width:95%">
                <div class="row"  >
                    <div class="col-md-2">
                        
                        <label for="" style="font-size: large ;color: white; font-weight: bold; white-space:nowrap;" >Sales Price :   {{a.sales_cost}}  
                          
                         &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
                        &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
                        &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
                        &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
                        &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
                        &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
                       &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;                         
                         Stock Quantity:
                           
                           
                           
                        
                           
                           
                           {{a.stock}} 
                        
                     
                      
                 </label>
                </div>
                </div>
                <div class="row" >
                    <div class="col-md-2">
                        
                        <label for="" style="font-size: large ; font-weight: bold; white-space:nowrap;color: white;">
                       
                        Purchace Price:  {{a.purchase_cost}} &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        
                        
                            
                                <label for="validationCustom01" style="color: white;"id="stock-value" readonly>Stock value:
                           
                    
                               

  
                    </label>
                   
                   </div></div>
                    
                
                        



                     <!--    <div class="dropdown">
                        <button type="button" class="btn btn-outline-info dropdown-toggle text-grey"
                                data-toggle="dropdown">filter by
                        </button>
                            <div class="dropdown-menu" style="background-color: black;">
                            <a class="dropdown-item" onclick="showDiv2()"
                               style="height: 40px; font-size: 15px; color: white;" >Estimate</a>
                            <a class="dropdown-item " onclick="showDiv()"
                               style="height: 40px; font-size: 15px; color: white;">Sales Order</a>
                            <a class="dropdown-item" onclick="showDiv3()"
                               style="height: 40px; font-size: 15px; color: white;">Invoice</a>
                            <a class="dropdown-item" 
                               style="height: 40px; font-size: 15px; color: white;">Delivery Challan</a>
                            <a class="dropdown-item" 
                               style="height: 40px; font-size: 15px; color: white;">Credit Note</a>
                            <a class="dropdown-item" 
                               style="height: 40px; font-size: 15px; color: white;">Recurring Invoice</a>
                            <a class="dropdown-item" onclick="showDiv1()" 
                               style="height: 40px; font-size: 15px; color: white;">Purchase Order</a>
                               <a class="dropdown-item" onclick="showDiv4()"
                               style="height: 40px; font-size: 15px; color: white;">Bill</a>
                            <a class="dropdown-item" 
                               style="height: 40px; font-size: 15px; color: white;">Vendor Credit</a>
                            </div>
                        </div> 
                    </div>
                   -->
                 
                    <!-- <div class="dropdown">
                        <button type="button" class="btn btn-outline-info dropdown-toggle text-grey"
                                data-toggle="dropdown">Status:All
                        </button>
                        <div class="dropdown-menu" style="background-color: black;">
                            <a class="dropdown-item" href="#"
                               style="height: 40px; font-size: 15px; color: white;">All</a>
                         <a class="dropdown-item" href="{% url 'iod_rate' %}"
                               style="height: 40px; font-size: 15px; color: white;">Sent</a>
                            <a class="dropdown-item" href="{% url 'iodhsn' %}"
                               style="height: 40px; font-size: 15px; color: white;">Client Viewed</a>
                            <a class="dropdown-item" href="{% url 'iod_import' %}"
                               style="height: 40px; font-size: 15px; color: white;">Accepted</a>
                            <a class="dropdown-item" href="{% url 'iod_export' %}"
                               style="height: 40px; font-size: 15px; color: white;">Invoiced</a>
                               <hr>
                               <a class="dropdown-item" href="{% url 'iod_import' %}"
                               style="height: 40px; font-size: 15px; color: white;">Declined</a>
                            <a class="dropdown-item" href="{% url 'iod_export' %}"
                               style="height: 40px; font-size: 15px; color: white;">Expired</a>
                        </div>
                    </div>
            
                </div> -->
                </center>
                
                
            </div>
        </div>
    </div>




    <!--------------------------------------------SALES------------------------------------------------->


    <div class="card radius-15" >
        <div class="card-body">
            <div class="table-responsive">
                <table class="table table-responsive-md mt-4 table-hover">
                    <thead>
                    <tr>
                        <th style="text-align: center;">Date</th>
                        <th style="text-align: center;">Number</th>
                        <th style="text-align: center;"> Name</th>
                        <th style="text-align: center;">Quantity</th>
                        <th style="text-align: center;">Price</th>
                        <th style="text-align: center;">Total</th>
                        <!-- <th style="text-align: center;">Status</th> -->
                        <th style="text-align: center;">Type</th>
                    </tr>
                    </thead>
                    <tbody>
                        {% for sale in sitems %}
                        {% if sale.product == a.name %}
                            <tr tr class="clickable-row " data-href="{% url 'sales_order_view' sale.id %}" >
                                <th style="text-align: center;">{{ sale.salesorder.saledate | date:'d-m-Y' }}</th>
                                <td style="text-align: center;">{{ sale.salesorder.saleno }}</td>
                                <td style="text-align: center;"> {{ sale.salesorder.salename }}</td>
                                <td style="text-align: center;">{{ sale.qty }}</td>
                                <td style="text-align: center;"> {{ sale.price }}</td>
                                <td style="text-align: center;">{{ sale.total }}</td>
                                <!-- <td style="text-align: center;"> {{ sale.salesorder.status }}</td> -->
                                <td style="text-align: center;"> sales Order</td>
                            </tr>
                      {% endif %}
                    {% endfor %}
 



<!----------------------------------------------PURCHASE------------------------------------------------------->


      
                
                    
                    {% for sale in pitems %}
                    {% if sale.items == a.name %}
                       
                            <tr tr class="clickable-row " data-href="{% url 'viewpurchaseorder' sale.porder.porderid %}" >
                            <th style="text-align: center;">{{ sale.porder.date | date:'d-m-Y' }}</th>
                            <td style="text-align: center;">{{ sale.porder.puchaseorder_no }}</td>
                            <td style="text-align: center;"> {{ sale.porder.vendor_name }}</td>
                            <td style="text-align: center;">{{ sale.quantity }}</td>
                            <td style="text-align: center;"> {{ sale.rate }}</td>
                            <td style="text-align: center;">{{ sale.amount }}</td>
                            <!-- <td style="text-align: center;"> {{ sale.porder.status }}</td> -->
                              <td style="text-align: center;"> Purchase Order</td>
                           
                        </tr>
                  {% endif %}
                {% endfor %}
                



<!------------------------------------ESTIMATES---------------------------------------------------------->


                     
                    {% for sale in eitems %}
                    {% if sale.item == a.name %}
                       
                            <tr tr class="clickable-row " data-href="{% url 'estimate_view' sale.estimate.estimateid %}" >
                            <th style="text-align: center;">{{ sale.estimate.estimatedate | date:'d-m-Y' }}</th>
                            <td style="text-align: center;">{{ sale.estimate.estimateno }}</td>
                            <td style="text-align: center;"> {{ sale.estimate.customer }}</td>
                            <td style="text-align: center;">{{ sale.quantity }}</td>
                            <td style="text-align: center;"> {{ sale.rate }}</td>
                            <td style="text-align: center;">{{ sale.total }}</td>
                            <!-- <td style="text-align: center;"> {{ sale.estimate.status }}</td> -->
                            <td style="text-align: center;"> Estimate</td>
                           
                        </tr>
                  {% endif %}
                {% endfor %}
    


<!---------------------------------------INVOICES-------------------------------------------------------->


                          
                    
                    {% for sale in iitems %}
                    {% if sale.product == a.name %}
                
                            <tr tr class="clickable-row " data-href="{% url 'invoice_view' sale.invoice.invoiceid %}" >
                            <th style="text-align: center;">{{ sale.invoice.invoicedate| date:'d-m-Y' }}</th>
                            <td style="text-align: center;">{{ sale.invoice.invoiceno }}</td>
                            <td style="text-align: center;"> {{ sale.invoice.customername }}</td>
                            <td style="text-align: center;">{{ sale.qty }}</td>
                            <td style="text-align: center;"> {{ sale.price }}</td>
                            <td style="text-align: center;">{{ sale.total }}</td>
                            <!-- <td style="text-align: center;"> {{ sale.invoice.status }}</td> -->
                            <td style="text-align: center;"> Invoices</td>
                        </tr>
                  {% endif %}
                {% endfor %}
             


<!------------------------------------BILL------------------------------------------------------------------>



                    
                    {% for sale in bitems %}
                    {% if sale.items == a.name %}
                       
                            <tr tr class="clickable-row " data-href="{% url 'viewbill' sale.bill.billid %}"  >
                            <th style="text-align: center;">{{ sale.bill.date | date:'d-m-Y' }}</th>
                            <td style="text-align: center;">{{ sale.bill.bill_no }}</td>
                            <td style="text-align: center;"> {{ sale.bill.vendor_name }}</td>
                            <td style="text-align: center;">{{ sale.quantity }}</td>
                            <td style="text-align: center;"> {{ sale.rate }}</td>
                            <td style="text-align: center;">{{ sale.amount }}</td>
                            <!-- <td style="text-align: center;"> {{ sale.bill.status }}</td> -->
                            <td style="text-align: center;"> Bills</td>
                           
                        </tr>
                  {% endif %}
                {% endfor %}
<!------------------------------------payment Recived------------------------------------------------------------------>

                {% for sale in payments %}
                 {% if i.cid_id == cmp1.cid %}
                   
                        <tr tr class="clickable-row " data-href="{% url 'gopayment_received' sale.payment.paymentid %}"  >
                        <th style="text-align: center;">{{ sale.payment.paymdate | date:'d-m-Y' }}</th>
                        <td style="text-align: center;">{{ sale.payment.refno }}</td>
                        <td style="text-align: center;"> {{ sale.payment.customer }}</td>
                        <td style="text-align: center;">{{ sale.quantity }}</td>
                        <td style="text-align: center;"> {{ sale.rate }}</td>
                        <td style="text-align: center;">{{ sale.amount }}</td>
                        <!-- <td style="text-align: center;"> {{ sale.payment.status }}</td> -->
                        <td style="text-align: center;"> Payment Recived</td>
                       
                    </tr>
               {% endif %} 
            {% endfor %}

            <!------------------------------------credit notes------------------------------------------------------------------>

                {% for sale in credititem %}
                 {% if sale.items == a.name %}
                   
                        <tr tr class="clickable-row " data-href="{% url 'viewcredit' sale.scredit.screditid %}"  >
                        <th style="text-align: center;">{{ sale.scredit.creditdate | date:'d-m-Y' }}</th>
                        <td style="text-align: center;">{{ sale.scredit.credit_no }}</td>
                        <td style="text-align: center;"> {{ sale.scredit.customer }}</td>
                        <td style="text-align: center;">{{ sale.quantity }}</td>
                        <td style="text-align: center;"> {{ sale.price }}</td>
                        <td style="text-align: center;">{{ sale.total }}</td>
                        <!-- <td style="text-align: center;"> {{ sale.scredit.status|default:'NAN' }}</td> -->
                        <td style="text-align: center;"> credit notes</td>
                       
                    </tr>
               {% endif %} 
            {% endfor %}
             <!------------------------------------Dedit notes------------------------------------------------------------------>

             {% for sale in pdebit_item %}
             {% if sale.items == a.name %}
               
                    <tr tr class="clickable-row " data-href="{% url 'viewpurchasedebit' sale.pdebit.pdebitid %}"  >
                    <th style="text-align: center;">{{ sale.pdebit.debitdate | date:'d-m-Y' }}</th>
                    <td style="text-align: center;">{{ sale.pdebit.debit_no }}</td>
                    <td style="text-align: center;"> {{ sale.pdebit.vendor }}</td>
                    <td style="text-align: center;">{{ sale.quantity }}</td>
                    <td style="text-align: center;"> {{ sale.price }}</td>
                    <td style="text-align: center;">{{ sale.total }}</td>
                    <!-- <td style="text-align: center;"> {{ sale.pdebit.status|default:'NAN' }}</td> -->
                    <td style="text-align: center;"> Debit notes</td>
                   
                </tr>
           {% endif %} 
        {% endfor %}
        <!-- ----------------------------------Dellivery Challan----------------------------------------------------------------

        {% for sale in dchallanitem %}
        {% if sale.product == a.name %}
          
               <tr tr class="clickable-row " data-href=""  >
               <th style="text-align: center;">{{ sale.dl_id.challan_date | date:'d-m-Y' }}</th>
               <td style="text-align: center;">{{ sale.dl_id.chal_no }}</td>
               <td style="text-align: center;"> {{ sale.dl_id.customer }}</td>
               <td style="text-align: center;">{{ sale.quantity }}</td>
               <td style="text-align: center;"> {{ sale.rate }}</td>
               <td style="text-align: center;">{{ sale.total }}</td>
              
               <td style="text-align: center;"> Delivery challan</td>
              
           </tr>
      {% endif %} 
   {% endfor %} -->


                </tbody>
            </table>
        </div>
    </div>
</div>

</div>

<!-- <script>
    jQuery(document).ready(function($) {
        $(".clickable-row").click(function() {  
            window.location = $(this).data("href");
        });
    });
</script>
<script>
function showDiv() {

    document.querySelector(".showsales").style.display = "block";
    document.querySelector(".showpurchase").style.display = "none";
    document.querySelector(".showest").style.display = "none";
    document.querySelector(".showinv").style.display = "none";
    document.querySelector(".showbill").style.display = "none";
  }
</script>
<script>
  function showDiv1() {
    document.querySelector(".showpurchase").style.display = "block";
    document.querySelector(".showsales").style.display = "none";
    document.querySelector(".showest").style.display = "none";
    document.querySelector(".showinv").style.display = "none";
    document.querySelector(".showbill").style.display = "none";
  }
</script>
<script>
    function showDiv2() {
      document.querySelector(".showest").style.display = "block";
      document.querySelector(".showpurchase").style.display = "none";
      document.querySelector(".showsales").style.display = "none";
      document.querySelector(".showinv").style.display = "none";
      document.querySelector(".showbill").style.display = "none";
    }
  </script>
  <script>
    function showDiv3() {
      document.querySelector(".showinv").style.display = "block";
      document.querySelector(".showest").style.display = "none";
      document.querySelector(".showpurchase").style.display = "none";
      document.querySelector(".showsales").style.display = "none";
      document.querySelector(".showbill").style.display = "none";
    }
  </script>
<script>
    function showDiv4() {
      document.querySelector(".showbill").style.display = "block";
      document.querySelector(".showinv").style.display = "none";
      document.querySelector(".showest").style.display = "none";
      document.querySelector(".showpurchase").style.display = "none";
      document.querySelector(".showsales").style.display = "none";
    }
  </script>   -->
  <script>
    // Assuming you have the stock quantity and purchase cost as variables
    var stockQuantity = parseFloat("{{a.stock}}");
    var purchaseCost = parseFloat("{{a.purchase_cost}}");

    // Calculate stock value
    var stockValue = stockQuantity * purchaseCost;

    // Display the calculated stock value
    document.getElementById('stock-value').textContent = "Stock Value: " + stockValue.toFixed(1);
</script>
  <script>
    // Add an event listener to the print button
    document.getElementById("print-button").addEventListener("click", function(e) {
        e.preventDefault(); 
        window.print(); 
    });
</script>



{% endfor %}
{% endblock %}

